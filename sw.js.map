{"version":3,"file":"sw.js","sources":["../src/sw.ts"],"sourcesContent":["import { version as appVersion } from '../package.json';\r\n\r\n// export default null\r\ndeclare let self: ServiceWorkerGlobalScope;\r\n\r\nconst cacheName = `superSplat-v${appVersion}`;\r\n\r\nconst cacheUrls = [\r\n    './',\r\n    './index.css',\r\n    './index.html',\r\n    './index.js',\r\n    './index.js.map',\r\n    './jszip.js',\r\n    './manifest.json',\r\n    './static/icons/logo-192.png',\r\n    './static/icons/logo-512.png',\r\n    './static/images/screenshot-narrow.jpg',\r\n    './static/images/screenshot-wide.jpg',\r\n    './static/lib/lodepng/lodepng.js',\r\n    './static/lib/lodepng/lodepng.wasm',\r\n    './static/locales/de.json',\r\n    './static/locales/en.json',\r\n    './static/locales/fr.json',\r\n    './static/locales/ja.json',\r\n    './static/locales/ko.json',\r\n    './static/locales/zh-CN.json'\r\n];\r\n\r\nself.addEventListener('install', (event) => {\r\n    console.log(`installing v${appVersion}`);\r\n\r\n    // create cache for current version\r\n    event.waitUntil(\r\n        caches.open(cacheName)\r\n        .then((cache) => {\r\n            cache.addAll(cacheUrls);\r\n        })\r\n    );\r\n});\r\n\r\nself.addEventListener('activate', () => {\r\n    console.log(`activating v${appVersion}`);\r\n\r\n    // delete the old caches once this one is activated\r\n    caches.keys().then((names) => {\r\n        for (const name of names) {\r\n            if (name !== cacheName) {\r\n                caches.delete(name);\r\n            }\r\n        }\r\n    });\r\n});\r\n\r\nself.addEventListener('fetch', (event) => {\r\n    event.respondWith(\r\n        caches.match(event.request)\r\n        .then(response => response ?? fetch(event.request))\r\n    );\r\n});\r\n"],"names":["appVersion"],"mappings":";;AAKA,MAAM,SAAS,GAAG,CAAA,YAAA,EAAeA,OAAU,EAAE;AAE7C,MAAM,SAAS,GAAG;IACd,IAAI;IACJ,aAAa;IACb,cAAc;IACd,YAAY;IACZ,gBAAgB;IAChB,YAAY;IACZ,iBAAiB;IACjB,6BAA6B;IAC7B,6BAA6B;IAC7B,uCAAuC;IACvC,qCAAqC;IACrC,iCAAiC;IACjC,mCAAmC;IACnC,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B;CACH;AAED,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAI;AACvC,IAAA,OAAO,CAAC,GAAG,CAAC,eAAeA,OAAU,CAAA,CAAE,CAAC;;IAGxC,KAAK,CAAC,SAAS,CACX,MAAM,CAAC,IAAI,CAAC,SAAS;AACpB,SAAA,IAAI,CAAC,CAAC,KAAK,KAAI;AACZ,QAAA,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC;IAC3B,CAAC,CAAC,CACL;AACL,CAAC,CAAC;AAEF,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,MAAK;AACnC,IAAA,OAAO,CAAC,GAAG,CAAC,eAAeA,OAAU,CAAA,CAAE,CAAC;;IAGxC,MAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,KAAI;AACzB,QAAA,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AACtB,YAAA,IAAI,IAAI,KAAK,SAAS,EAAE;AACpB,gBAAA,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;YACvB;QACJ;AACJ,IAAA,CAAC,CAAC;AACN,CAAC,CAAC;AAEF,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,KAAI;IACrC,KAAK,CAAC,WAAW,CACb,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO;AACzB,SAAA,IAAI,CAAC,QAAQ,IAAI,QAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CACtD;AACL,CAAC,CAAC"}